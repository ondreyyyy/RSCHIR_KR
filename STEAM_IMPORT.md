# Инструкция по импорту профиля из Steam

## Шаг 1: Получение Steam API ключа

Если ты уже создал API домен в Steam, то:

1. Перейди на https://steamcommunity.com/dev/apikey
2. Войди в свой Steam аккаунт
3. Заполни форму:
   - **Domain Name**: введи домен, который ты указал при создании API домена (например, `localhost` или `127.0.0.1`)
   - Нажми "Register"
4. Скопируй **API Key** (выглядит как длинная строка букв и цифр)

**Важно**: 
- Ключ будет показан только один раз, сохрани его!
- Если потерял ключ, можешь сгенерировать новый на той же странице

## Шаг 2: Получение своего Steam ID

Steam API требует **SteamID64** (64-битный идентификатор). Есть несколько способов его получить:

### Способ 1: Через Steam профиль (самый простой)

1. Открой свой Steam профиль в браузере (https://steamcommunity.com/profiles/ТВОЙ_ID)
2. Скопируй цифры из URL после `/profiles/`
   - Например, если URL: `https://steamcommunity.com/profiles/76561198012345678`
   - То твой SteamID64: `76561198012345678`

### Способ 2: Через Steam ID Finder

1. Перейди на https://steamid.io/
2. Введи свой Steam профиль (URL или никнейм)
3. Скопируй значение **SteamID64** (это длинное число, начинается с `7656119...`)

### Способ 3: Через Steam API (если знаешь свой SteamID3)

Если у тебя есть SteamID3 в формате `[U:1:XXXXXXX]`, можно конвертировать:
- Используй конвертер: https://steamid.io/
- Или формулу: SteamID64 = 76561197960265728 + (Y * 2) + Z
  - Где `[U:1:Y:Z]` - твой SteamID3

## Шаг 3: Импорт через ui.php

1. Открой http://localhost:8000/ui.php

2. Прокрути вниз до раздела **"Импорт профиля из Steam"**

3. Заполни форму:
   - **Steam API Key**: вставь ключ, который получил на шаге 1
   - **SteamID**: вставь свой SteamID64 (длинное число, начинается с `7656119...`)

4. Нажми кнопку **"Импортировать"**

5. Если всё правильно:
   - Появится сообщение об успехе
   - Профиль появится в таблице "Список профилей"
   - В качестве `external_id` будет использован твой SteamID64
   - В качестве `nickname` будет использован твой Steam никнейм

## Пример заполнения формы

```
Steam API Key: ABC123DEF456GHI789JKL012MNO345PQR678STU901VWX234
SteamID: 76561198012345678
```

## Возможные ошибки

### "Steam API unreachable"
- Проверь интернет-соединение
- Убедись, что Steam API доступен (проверь https://steamcommunity.com/dev)

### "Steam profile not found"
- Проверь, что SteamID правильный (должен быть SteamID64, начинается с `7656119...`)
- Убедись, что профиль Steam не приватный
- Попробуй получить SteamID64 заново через https://steamid.io/

### "Invalid API Key"
- Проверь, что API ключ скопирован полностью (без пробелов)
- Убедись, что домен в API ключе совпадает с тем, что ты указал при регистрации
- Если используешь `localhost`, убедись, что в Steam API указан именно `localhost`

## Что происходит при импорте

1. Система отправляет запрос к Steam Web API:
   ```
   https://api.steampowered.com/ISteamUser/GetPlayerSummaries/v2/?key=ТВОЙ_КЛЮЧ&steamids=ТВОЙ_STEAMID64
   ```

2. Steam API возвращает данные профиля (никнейм, аватар и т.д.)

3. Система создаёт или обновляет профиль в базе данных:
   - `external_id` = твой SteamID64
   - `nickname` = твой Steam никнейм
   - `stats` = пустые (можно обновить вручную через форму)

4. Профиль появляется в списке профилей

## Дополнительно

После импорта ты можешь:
- Обновить статистику профиля через форму "Обновить статистику профиля"
- При обновлении статистики будет отправлено real-time событие (если настроен Pusher)
- Удалить профиль через форму "Удалить профиль"

## Альтернатива: Импорт через API

Можешь также импортировать через API напрямую:

```bash
curl -X POST http://localhost:8000/import/from-steam \
  -H "Content-Type: application/json" \
  -d "{\"key\":\"ТВОЙ_API_KEY\",\"steam_id\":\"ТВОЙ_STEAMID64\"}"
```

